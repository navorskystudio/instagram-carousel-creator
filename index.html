<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Carousel Creator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: #fafafa;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 32px;
            color: #262626;
            margin-bottom: 10px;
        }

        .header p {
            color: #8e8e8e;
            font-size: 16px;
        }

        .upload-section {
            background: white;
            border: 1px solid #dbdbdb;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .upload-area {
            border: 2px dashed #dbdbdb;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: #fafafa;
        }

        .upload-area:hover {
            border-color: #0095f6;
            background: #f0f8ff;
        }

        .upload-area.dragover {
            border-color: #0095f6;
            background: #e1f5fe;
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .upload-text {
            font-size: 18px;
            color: #262626;
            margin-bottom: 5px;
        }

        .upload-hint {
            font-size: 14px;
            color: #8e8e8e;
        }

        #fileInput {
            display: none;
        }

        .profile-settings {
            margin-top: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-size: 14px;
            font-weight: 600;
            color: #262626;
            margin-bottom: 5px;
        }

        .input-group input,
        .input-group textarea {
            padding: 10px;
            border: 1px solid #dbdbdb;
            border-radius: 4px;
            font-size: 14px;
            font-family: inherit;
        }

        .input-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .thumbnails {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .thumbnail {
            position: relative;
            aspect-ratio: 4 / 5;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid #dbdbdb;
            cursor: move;
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .thumbnail-number {
            position: absolute;
            top: 5px;
            left: 5px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .thumbnail-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 59, 48, 0.9);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            line-height: 1;
            border: none;
            transition: all 0.2s;
        }

        .thumbnail-remove:hover {
            background: rgba(255, 59, 48, 1);
            transform: scale(1.1);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #0095f6;
            color: white;
        }

        .btn-primary:hover {
            background: #0084e0;
        }

        .btn-secondary {
            background: #efefef;
            color: #262626;
        }

        .btn-secondary:hover {
            background: #dbdbdb;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .preview-section {
            background: white;
            border: 1px solid #dbdbdb;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            display: none;
        }

        .preview-section.active {
            display: block;
        }

        .preview-title {
            font-size: 24px;
            font-weight: 600;
            color: #262626;
            margin-bottom: 20px;
            text-align: center;
        }

        .instagram-container {
            max-width: 470px;
            width: 100%;
            margin: 0 auto;
            background: white;
            border: 1px solid #dbdbdb;
            border-radius: 8px;
            overflow: hidden;
        }

        .post-header {
            display: flex;
            align-items: center;
            padding: 14px 16px;
            border-bottom: 1px solid #efefef;
        }

        .profile-pic {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .username {
            font-weight: 600;
            font-size: 14px;
            color: #262626;
        }

        .carousel-container {
            position: relative;
            width: 100%;
            aspect-ratio: 4 / 5;
            overflow: hidden;
            background: #000;
        }

        .carousel-track {
            display: flex;
            transition: transform 0.4s ease-in-out;
            height: 100%;
        }

        .carousel-slide {
            min-width: 100%;
            height: 100%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
        }

        .carousel-slide img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            color: #262626;
            z-index: 10;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .carousel-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-50%) scale(1.1);
        }

        .carousel-btn.prev {
            left: 12px;
        }

        .carousel-btn.next {
            right: 12px;
        }

        .carousel-btn:disabled {
            opacity: 0;
            pointer-events: none;
        }

        .carousel-indicators {
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 5px;
            z-index: 10;
            background: rgba(0, 0, 0, 0.3);
            padding: 4px 8px;
            border-radius: 12px;
        }

        .indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            transition: all 0.3s;
            cursor: pointer;
        }

        .indicator.active {
            background: rgba(255, 255, 255, 1);
            transform: scale(1.3);
        }

        .counter {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 13px;
            font-size: 12px;
            font-weight: 600;
            z-index: 10;
        }

        .post-actions {
            padding: 10px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #efefef;
        }

        .action-buttons {
            display: flex;
            gap: 16px;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 24px;
            padding: 8px 0;
        }

        .likes {
            padding: 10px 16px 8px;
            font-weight: 600;
            font-size: 14px;
            color: #262626;
        }

        .caption {
            padding: 0 16px 8px;
            font-size: 14px;
            line-height: 20px;
            color: #262626;
        }

        .caption .username {
            margin-right: 6px;
        }

        .timestamp {
            padding: 0 16px 16px;
            font-size: 10px;
            color: #8e8e8e;
            text-transform: uppercase;
        }

        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .alert-info {
            background: #e1f5fe;
            color: #0277bd;
            border: 1px solid #b3e5fc;
        }

        .alert-error {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ffcdd2;
        }

        @media (max-width: 768px) {
            .profile-settings {
                grid-template-columns: 1fr;
            }

            .thumbnails {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üì∏ Instagram Carousel Creator</h1>
            <p>Crie e visualize carross√©is do Instagram com at√© 20 imagens</p>
        </div>

        <div class="upload-section">
            <h2 style="margin-bottom: 20px; color: #262626;">1. Upload das Imagens</h2>
            
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üì§</div>
                <div class="upload-text">Clique ou arraste imagens aqui</div>
                <div class="upload-hint">M√°ximo de 20 imagens ‚Ä¢ Formato recomendado: 1080x1350px (4:5)</div>
            </div>
            
            <input type="file" id="fileInput" accept="image/*" multiple>

            <div id="thumbnailsContainer" class="thumbnails"></div>

            <h2 style="margin-top: 30px; margin-bottom: 15px; color: #262626;">2. Personalize o Post</h2>
            
            <div class="profile-settings">
                <div class="input-group">
                    <label for="usernameInput">Nome de usu√°rio</label>
                    <input type="text" id="usernameInput" placeholder="seu_usuario" value="mpro_rondonia">
                </div>
                
                <div class="input-group">
                    <label for="likesInput">N√∫mero de curtidas</label>
                    <input type="text" id="likesInput" placeholder="1.234" value="1.234">
                </div>
                
                <div class="input-group full-width">
                    <label for="captionInput">Legenda</label>
                    <textarea id="captionInput" placeholder="Digite a legenda do post...">21 Dias de Ativismo pelo Fim da Viol√™ncia contra as Mulheres üôåüèæ | Dia da Consci√™ncia Negra</textarea>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" id="clearBtn">üóëÔ∏è Limpar Tudo</button>
                <button class="btn btn-primary" id="previewBtn" disabled>üëÅÔ∏è Visualizar Preview</button>
            </div>
        </div>

        <div class="preview-section" id="previewSection">
            <div class="preview-title">Preview do Instagram</div>
            
            <div class="instagram-container">
                <div class="post-header">
                    <div class="profile-pic" id="previewInitials">MP</div>
                    <span class="username" id="previewUsername">mpro_rondonia</span>
                </div>

                <div class="carousel-container">
                    <div class="carousel-indicators" id="indicators"></div>
                    <div class="counter" id="counter">1/1</div>
                    
                    <button class="carousel-btn prev" id="prevBtn">‚Äπ</button>
                    <button class="carousel-btn next" id="nextBtn">‚Ä∫</button>

                    <div class="carousel-track" id="carouselTrack"></div>
                </div>

                <div class="post-actions">
                    <div class="action-buttons">
                        <button class="action-btn">‚ô•</button>
                        <button class="action-btn">üí¨</button>
                        <button class="action-btn">‚úà</button>
                    </div>
                    <button class="action-btn">üîñ</button>
                </div>

                <div class="likes" id="previewLikes">1.234 curtidas</div>

                <div class="caption">
                    <span class="username" id="previewCaptionUsername">mpro_rondonia</span>
                    <span id="previewCaption">21 Dias de Ativismo pelo Fim da Viol√™ncia contra as Mulheres</span>
                </div>

                <div class="timestamp">H√° 2 horas</div>
            </div>

            <div class="button-group" style="margin-top: 30px;">
                <button class="btn btn-secondary" id="backBtn">‚Üê Voltar para Edi√ß√£o</button>
            </div>
        </div>
    </div>

    <script>
        let uploadedImages = [];
        let currentSlide = 0;

        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const thumbnailsContainer = document.getElementById('thumbnailsContainer');
        const previewBtn = document.getElementById('previewBtn');
        const clearBtn = document.getElementById('clearBtn');
        const previewSection = document.getElementById('previewSection');
        const backBtn = document.getElementById('backBtn');

        // Upload handlers
        uploadArea.addEventListener('click', () => fileInput.click());
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            handleFiles(e.dataTransfer.files);
        });

        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });

        function handleFiles(files) {
            const maxFiles = 20;
            const remainingSlots = maxFiles - uploadedImages.length;
            
            if (files.length > remainingSlots) {
                alert(`Voc√™ pode adicionar no m√°ximo ${remainingSlots} imagens. M√°ximo total: ${maxFiles}`);
                return;
            }

            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        uploadedImages.push(e.target.result);
                        renderThumbnails();
                        updatePreviewButton();
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function renderThumbnails() {
            thumbnailsContainer.innerHTML = '';
            
            uploadedImages.forEach((img, index) => {
                const thumbnail = document.createElement('div');
                thumbnail.className = 'thumbnail';
                thumbnail.draggable = true;
                thumbnail.dataset.index = index;
                
                thumbnail.innerHTML = `
                    <img src="${img}" alt="Imagem ${index + 1}">
                    <div class="thumbnail-number">${index + 1}</div>
                    <button class="thumbnail-remove" onclick="removeImage(${index})">√ó</button>
                `;

                // Drag and drop para reordenar
                thumbnail.addEventListener('dragstart', handleDragStart);
                thumbnail.addEventListener('dragover', handleDragOver);
                thumbnail.addEventListener('drop', handleDrop);
                thumbnail.addEventListener('dragend', handleDragEnd);
                
                thumbnailsContainer.appendChild(thumbnail);
            });
        }

        let draggedIndex = null;

        function handleDragStart(e) {
            draggedIndex = parseInt(e.target.closest('.thumbnail').dataset.index);
            e.target.closest('.thumbnail').style.opacity = '0.5';
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDrop(e) {
            e.preventDefault();
            const dropIndex = parseInt(e.target.closest('.thumbnail').dataset.index);
            
            if (draggedIndex !== null && draggedIndex !== dropIndex) {
                const draggedImage = uploadedImages[draggedIndex];
                uploadedImages.splice(draggedIndex, 1);
                uploadedImages.splice(dropIndex, 0, draggedImage);
                renderThumbnails();
            }
        }

        function handleDragEnd(e) {
            e.target.closest('.thumbnail').style.opacity = '1';
            draggedIndex = null;
        }

        function removeImage(index) {
            uploadedImages.splice(index, 1);
            renderThumbnails();
            updatePreviewButton();
        }

        function updatePreviewButton() {
            previewBtn.disabled = uploadedImages.length === 0;
        }

        clearBtn.addEventListener('click', () => {
            if (confirm('Tem certeza que deseja remover todas as imagens?')) {
                uploadedImages = [];
                renderThumbnails();
                updatePreviewButton();
                fileInput.value = '';
            }
        });

        previewBtn.addEventListener('click', () => {
            generatePreview();
            document.querySelector('.upload-section').style.display = 'none';
            previewSection.classList.add('active');
            window.scrollTo(0, 0);
        });

        backBtn.addEventListener('click', () => {
            previewSection.classList.remove('active');
            document.querySelector('.upload-section').style.display = 'block';
            window.scrollTo(0, 0);
        });

        function generatePreview() {
            const username = document.getElementById('usernameInput').value || 'usuario';
            const likes = document.getElementById('likesInput').value || '0';
            const caption = document.getElementById('captionInput').value || '';

            // Update profile info
            const initials = username.substring(0, 2).toUpperCase();
            document.getElementById('previewInitials').textContent = initials;
            document.getElementById('previewUsername').textContent = username;
            document.getElementById('previewCaptionUsername').textContent = username;
            document.getElementById('previewLikes').textContent = `${likes} curtidas`;
            document.getElementById('previewCaption').textContent = caption;

            // Build carousel
            const track = document.getElementById('carouselTrack');
            const indicatorsContainer = document.getElementById('indicators');
            
            track.innerHTML = '';
            indicatorsContainer.innerHTML = '';
            
            uploadedImages.forEach((img, index) => {
                const slide = document.createElement('div');
                slide.className = 'carousel-slide';
                slide.innerHTML = `<img src="${img}" alt="Slide ${index + 1}">`;
                track.appendChild(slide);

                const indicator = document.createElement('div');
                indicator.className = 'indicator';
                if (index === 0) indicator.classList.add('active');
                indicator.addEventListener('click', () => goToSlide(index));
                indicatorsContainer.appendChild(indicator);
            });

            currentSlide = 0;
            updateCarousel();
        }

        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        function updateCarousel() {
            const track = document.getElementById('carouselTrack');
            const counter = document.getElementById('counter');
            const indicators = document.querySelectorAll('.indicator');
            const totalSlides = uploadedImages.length;

            const offset = currentSlide * -100;
            track.style.transform = `translateX(${offset}%)`;
            counter.textContent = `${currentSlide + 1}/${totalSlides}`;
            
            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index === currentSlide);
            });

            prevBtn.disabled = currentSlide === 0;
            nextBtn.disabled = currentSlide === totalSlides - 1;
        }

        function goToSlide(index) {
            if (index >= 0 && index < uploadedImages.length) {
                currentSlide = index;
                updateCarousel();
            }
        }

        prevBtn.addEventListener('click', () => {
            if (currentSlide > 0) {
                currentSlide--;
                updateCarousel();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentSlide < uploadedImages.length - 1) {
                currentSlide++;
                updateCarousel();
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (previewSection.classList.contains('active')) {
                if (e.key === 'ArrowLeft' && currentSlide > 0) {
                    currentSlide--;
                    updateCarousel();
                } else if (e.key === 'ArrowRight' && currentSlide < uploadedImages.length - 1) {
                    currentSlide++;
                    updateCarousel();
                }
            }
        });

        // Touch support
        let touchStartX = 0;
        let touchEndX = 0;

        document.querySelector('.carousel-container')?.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });

        document.querySelector('.carousel-container')?.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, { passive: true });

        function handleSwipe() {
            const diff = touchStartX - touchEndX;
            if (Math.abs(diff) > 50) {
                if (diff > 0 && currentSlide < uploadedImages.length - 1) {
                    currentSlide++;
                    updateCarousel();
                } else if (diff < 0 && currentSlide > 0) {
                    currentSlide--;
                    updateCarousel();
                }
            }
        }
    </script>
</body>
</html>
